<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>SPARKS - Sistem Pelaporan Kinerja</title>

    <!-- Custom fonts for this template-->
    <link
      href="vendor/fontawesome-free/css/all.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
      rel="stylesheet"
    />

    <!-- Custom styles for this template-->
    <link href="css/sb-admin-2.min.css" rel="stylesheet" />

    <style>
      .collapse-item.no-data {
        white-space: normal; /* Biarkan teks turun ke bawah */
        word-wrap: break-word; /* Paksa kata panjang turun ke baris berikutnya */
        overflow-wrap: break-word; /* Kompatibel dengan browser modern */
        padding: 8px 12px;
        line-height: 1.4;
        font-size: 14px;
      }

      .chart-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
      }

      .chart-container {
        background-color: #fff;
        border: 1px solid #e5e7eb;
        border-radius: 12px;
        padding: 16px;
        height: 100%;
      }

      .chart-title {
        font-weight: bold;
        margin-bottom: 12px;
      }

      .chart-wrapper {
        position: relative;
        width: 100%;
        height: 300px; /* atau 250px sesuai kebutuhan */
      }
    </style>
  </head>

  <body id="page-top">
    <!-- Page Wrapper -->
    <div id="wrapper">
      <!-- Sidebar -->
      <ul
        class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion toggled"
        id="accordionSidebar"
      >
        <!-- Sidebar - Brand -->
        <a
          class="sidebar-brand d-flex align-items-center justify-content-center"
          href="index.html"
        >
          <div class="sidebar-brand-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <div class="sidebar-brand-text mx-3">
            <span class="logo-text">SPARKS</span>
          </div>
        </a>

        <!-- Divider -->
        <hr class="sidebar-divider my-0" />

        <!-- Nav Item - Dashboard -->
        <li class="nav-item active">
          <a class="nav-link" href="../index.html">
            <i class="fas fa-fw fa-home"></i>
            <span>Home</span></a
          >
        </li>
        <li class="nav-item">
          <a
            class="nav-link collapsed"
            href="#"
            data-toggle="collapse"
            data-target="#collapse1"
            aria-expanded="true"
            aria-controls="collapse1"
          >
            <i class="fas fa-clipboard-list"></i>
            <span>Perencanaan Kerja</span>
          </a>
          <div
            id="collapse1"
            class="collapse"
            aria-labelledby="headingTwo"
            data-parent="#accordionSidebar"
          >
            <div class="bg-white py-2 collapse-inner rounded">
              <a
                class="collapse-item"
                href="PerencanaanKinerja/RencanaStrategis.html"
                >Rencana Strategis</a
              >
              <a
                class="collapse-item"
                href="PerencanaanKinerja/PerjanjianKinerja.html"
                >Perjanjian Kinerja</a
              >
              <a
                class="collapse-item"
                href="PerencanaanKinerja/IndikatorKinerjaUtama.html"
                >Indikator Kinerja Utama</a
              >
            </div>
          </div>
        </li>
        <li class="nav-item">
          <a
            class="nav-link collapsed"
            href="#"
            data-toggle="collapse"
            data-target="#collapse2"
            aria-expanded="true"
            aria-controls="collapse2"
          >
            <i class="fas fa-ruler"></i>
            <span>Pengukuran Kerja</span>
          </a>
          <div
            id="collapse2"
            class="collapse"
            aria-labelledby="headingTwo"
            data-parent="#accordionSidebar"
          >
            <div class="bg-white py-2 collapse-inner rounded">
              <a class="collapse-item" href="PengukuranKinerja/SKTimSAKIP.html"
                >SK Tim Sakip</a
              >
              <a
                class="collapse-item"
                href="PengukuranKinerja/BuktiDukungCapaianKinerja.html"
                style="white-space: normal; word-break: break-word"
                >Bukti Dukung Capaian Kinerja</a
              >
              <a
                class="collapse-item"
                href="PengukuranKinerja/BuktiDukungSolusi.html"
                style="white-space: normal; word-break: break-word"
                >Bukti Dukung Solusi</a
              >
              <a
                class="collapse-item"
                href="PengukuranKinerja/BuktiDukungTindakLanjut.html"
                style="white-space: normal; word-break: break-word"
                >Bukti Dukung Tindak Lanjut</a
              >
              <a
                class="collapse-item"
                href="PengukuranKinerja/RapatMonitoringCapaianKinerjaTriwulanan.html"
                style="white-space: normal; word-break: break-word"
                >Monitoring Capaian Kinerja Triwulanan</a
              >
              <a
                class="collapse-item"
                href="PengukuranKinerja/CascadingKinerjaPegawai.html"
                style="white-space: normal; word-break: break-word"
                >Cascading Kinerja Pegawai</a
              >
              <a
                class="collapse-item"
                href="PengukuranKinerja/SasaranKinerjaPegawai.html"
                >Sasaran Kinerja Pegawai</a
              >
            </div>
          </div>
        </li>
        <li class="nav-item">
          <a
            class="nav-link collapsed"
            href="#"
            data-toggle="collapse"
            data-target="#collapse3"
            aria-expanded="true"
            aria-controls="collapse3"
          >
            <i class="fas fa-file-alt"></i>
            <span>Pelaporan Kerja</span>
          </a>
          <div
            id="collapse3"
            class="collapse"
            aria-labelledby="headingTwo"
            data-parent="#accordionSidebar"
          >
            <div class="bg-white py-2 collapse-inner rounded">
              <a
                class="collapse-item"
                href="PelaporanKinerja/LaporanKinerja.html"
                >Laporan Kinerja</a
              >
              <a
                class="collapse-item"
                href="PelaporanKinerja/MekanismeRewardAndPunishment.html"
                >Reward and Punishment</a
              >
              <a class="collapse-item" href="PelaporanKinerja/Penghargaan.html"
                >Penghargaan</a
              >
            </div>
          </div>
        </li>
        <li class="nav-item">
          <a
            class="nav-link collapsed"
            href="#"
            data-toggle="collapse"
            data-target="#collapse4"
            aria-expanded="true"
            aria-controls="collapse4"
          >
            <i class="fas fa-chart-bar"></i>
            <span>Evaluasi Kerja</span>
          </a>
          <div
            id="collapse4"
            class="collapse"
            aria-labelledby="headingTwo"
            data-parent="#accordionSidebar"
          >
            <div class="bg-white py-2 collapse-inner rounded">
              <a
                class="collapse-item"
                href="EvaluasiKinerja/LaporanHasilEvaluasiAKIP.html"
                >LHE AKIP</a
              >
              <a
                class="collapse-item"
                href="EvaluasiKinerja/PermindokAKIP.html"
                style="white-space: normal; word-break: break-word"
                >Permindok AKIP</a
              >
              <a
                class="collapse-item"
                href="EvaluasiKinerja/TindakLanjutLheAKIP.html"
                >Tindak Lanjut LHE AKIP</a
              >
            </div>
          </div>
        </li>

        <!-- Divider -->
        <hr class="sidebar-divider d-none d-md-block" />

        <!-- Sidebar Toggler (Sidebar) -->
        <div class="text-center d-none d-md-inline">
          <button class="rounded-circle border-0" id="sidebarToggle"></button>
        </div>
      </ul>
      <!-- End of Sidebar -->

      <!-- Content Wrapper -->
      <div id="content-wrapper" class="d-flex flex-column">
        <!-- Main Content -->
        <div id="content">
          <!-- Topbar -->
          <nav
            class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow py-5 d-flex"
          >
            <!-- Sidebar Toggle (Topbar) -->
            <button
              id="sidebarToggleTop"
              class="btn btn-link d-md-none rounded-circle mr-3"
            >
              <i class="fa fa-bars"></i>
            </button>

            <!-- Teks di kiri -->
            <div class="d-flex flex-column">
              <h4 class="text-dark font-weight-bold">
                Sistem Pelaporan Kinerja
              </h4>
              <!-- <p>BPS Kota Surabaya</p> -->
            </div>

            <!-- Select di kanan -->
            <!-- <div class="ms-auto">
              <select
                class="custom-select"
                id="tahun"
                aria-label="Default select example"
              >
                <option selected>Pilih Tahun</option>
                <option value="2025">2025</option>
                <option value="2024">2024</option>
                <option value="2023">2023</option>
                <option value="2022">2022</option>
                <option value="2021">2021</option>
                <option value="2020">2020</option>
                <option value="2025-2029">2025-2029</option>
                <option value="2022-2024">2022-2024</option>
                <option value="2020-2024">2020-2024</option>
                <option value="2020-2021">2020-2021</option>
              </select>
            </div> -->
          </nav>

          <!-- End of Topbar -->

          <!-- Begin Page Content -->
          <div class="container-fluid">
            <div class="card">
              <div class="card-body text-center">
                <h2 class="font-weight-bold mb-4">Selamat Datang di SPARKS</h2>
                <p>
                  Sistem Pelaporan Kinerja BPS Kota Surabaya untuk mempermudah
                  kerja tim SAKIP demi terciptanya akuntabilitas instansi yang
                  baik dan terpercaya.
                </p>
              </div>
            </div>
            <div class="card mt-4">
              <div class="card-body text-center">
                <h2 class="font-weight-bold mb-4">
                  <i class="fas fa-chart-line text-primary"></i> Capaian
                  Reformasi Birokrasi BPS Kota Surabaya
                </h2>
                <div class="chart-grid row">
                  <!-- Grafik Indeks BerAKHLAK -->
                  <div class="chart-container col-lg-12 col-md-6 col-sm-12">
                    <div class="chart-title">üéØ Indeks BerAKHLAK</div>
                    <div class="chart-wrapper">
                      <canvas id="chartBerAKHLAK"></canvas>
                    </div>
                  </div>

                  <!-- Grafik Nilai Sakip -->
                  <div class="chart-container col-lg-12 col-md-6 col-sm-12">
                    <div class="chart-title">
                      üìà Nilai Sakip (Trend 2020-2024)
                    </div>
                    <div class="chart-wrapper">
                      <canvas id="chartSakip"></canvas>
                    </div>
                  </div>

                  <!-- Grafik Nilai Desk Evaluation Zona Integritas -->
                  <div class="chart-container col-lg-12 col-md-6 col-sm-12">
                    <div class="chart-title">
                      üèÜ Nilai Desk Evaluation Zona Integritas
                    </div>
                    <div class="chart-wrapper">
                      <canvas id="chartZonaIntegritas"></canvas>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- /.container-fluid -->
        </div>
        <!-- End of Main Content -->

        <!-- Footer -->
        <footer class="sticky-footer bg-white">
          <div class="container my-auto">
            <div class="copyright text-center my-auto">
              <span>Copyright &copy; SPARKS</span>
            </div>
          </div>
        </footer>
        <!-- End of Footer -->
      </div>
      <!-- End of Content Wrapper -->
    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
      <i class="fas fa-angle-up"></i>
    </a>

    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>

    <!-- Page level plugins -->
    <script src="vendor/chart.js/Chart.min.js"></script>

    <!-- Page level custom scripts -->
    <script src="js/demo/chart-area-demo.js"></script>
    <script src="js/demo/chart-pie-demo.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
      const data = [
        {
          indikator: "Indeks BerAKHLAK",
          Tahun: "2024",
          Nilai: "61,50",
        },
        {
          indikator: "Nilai Sakip",
          Tahun: "2024",
          Nilai: "77,35",
        },
        {
          indikator: "Nilai Sakip",
          Tahun: "2023",
          Nilai: "70,65",
        },
        {
          indikator: "Nilai Sakip",
          Tahun: "2022",
          Nilai: "70,05",
        },
        {
          indikator: "Nilai Sakip",
          Tahun: "2021",
          Nilai: "63,66",
        },
        {
          indikator: "Nilai Sakip",
          Tahun: "2020",
          Nilai: "49,61",
        },
        {
          indikator: "Nilai Desk Evaluation Zona Integritas",
          Tahun: "2025",
          Nilai: "95,41",
        },
        {
          indikator: "Nilai Desk Evaluation Zona Integritas",
          Tahun: "2024",
          Nilai: "85,64",
        },
      ];

      const dataSubSidebar = [
        {
          PerencanaanKinerja: [
            {
              IndikatorKinerjaUtama: [
                { Tahun: "2025-2029", Link: "Belum Tersedia" },
                {
                  Tahun: "2022-2024",
                  Link: "https://ppid.bps.go.id/upload/doc/Peraturan_Kepala_BPS_No_3_Tahun_2022_1680679321.pdf",
                },
                {
                  Tahun: "2020-2021",
                  Link: "https://ppid.bps.go.id/upload/doc/Peraturan_Kepala_BPS_No_38_Tahun_2020_1646882801.pdf",
                },
              ],
            },
            {
              RencanaStrategis: [
                { Tahun: "2025-2029", Link: "Belum Tersedia" },
                {
                  Tahun: "2020-2024",
                  Link: "https://ppid.bps.go.id/upload/doc/Reviu_Renstra_2020-2024_BPS_Kota_Surabaya_1677240306.pdf",
                },
              ],
            },
            {
              PerjanjianKinerja: [
                {
                  Tahun: "2025",
                  Link: "https://ppid.bps.go.id/upload/doc/PK2025_Rev_1745226013.pdf",
                },
                {
                  Tahun: "2024",
                  Link: "https://ppid.bps.go.id/upload/doc/PK_BPS_Surabaya_2024_1707518909.pdf",
                },
                {
                  Tahun: "2023",
                  Link: "https://ppid.bps.go.id/upload/doc/Reviu_Kedua_Perjanjian_Kinerja_BPS_Kota_Surabaya_2020_1704985925.pdf",
                },
                {
                  Tahun: "2022",
                  Link: "https://ppid.bps.go.id/upload/doc/Perjanjian_Kinerja_BPS_Kota_Surabaya_2022_1694693200.pdf",
                },
                {
                  Tahun: "2021",
                  Link: "https://ppid.bps.go.id/upload/doc/Perjanjian_Kinerja_BPS_Kota_Surabaya_2022_1694693200.pdf",
                },
                {
                  Tahun: "2020",
                  Link: "https://ppid.bps.go.id/upload/doc/Reviu_Perjanjian_Kinerja_BPS_Kota_Surabaya_2020_1694693136.pdf",
                },
              ],
            },
          ],
        },
        {
          PengukuranKinerja: [
            {
              RapatMonitoringCapaianKinerjaTriwulanan: [
                {
                  Tahun: "2025",
                  Link: "https://drive.google.com/drive/folders/1gr1x2dAAh5e2QR-lYocv3D3ECr76Odzt?usp=sharing",
                },
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/drive/folders/1oORNOtL-2_ORo_n1uQHI8Sdr4V9zK1ag?usp=drive_link",
                },
              ],
            },
            {
              BuktiDukungCapaianKinerja: [
                {
                  Tahun: "2025",
                  Link: "https://drive.google.com/drive/folders/1duQ0fL_KUbLRSQapVpm4buAhEIHTQPHw?usp=sharing",
                },
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/drive/folders/1O415yNtKKU7OUeDvkpm5wADGjdIMMDWw?usp=drive_link",
                },
              ],
            },
            {
              BuktiDukungSolusi: [
                {
                  Tahun: "2025",
                  Link: "https://drive.google.com/drive/folders/1LoWLWesGE5oJueTceZk3cIqU5xt6kHWg?usp=drive_link",
                },
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/drive/folders/1csjk_3uREMhKA988QyiYPwLHUDGOYnMb?usp=drive_link",
                },
              ],
            },
            {
              BuktiDukungTindakLanjut: [
                {
                  Tahun: "2025",
                  Link: "https://drive.google.com/drive/folders/1c5aEquX_BW-3pAUO97EurPgbymJan2JR?usp=drive_link",
                },
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/drive/folders/1m4VE4U2IXlsTqxN-cN2DrFykI8RJ7r_u?usp=drive_link",
                },
              ],
            },
            {
              SKTimSAKIP: [
                {
                  Tahun: "2025",
                  Link: "https://drive.google.com/file/d/12pKTmvUfd5llglNTfAyBjqnsIMpyvZVO/view?usp=drive_link",
                },
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/file/d/1ntDZPnVgp4VGn8KAOMyuZL6JNAT1jSuq/view?usp=sharing",
                },
              ],
            },
            {
              CascadingKinerjaPegawai: [
                {
                  Tahun: "2025",
                  Link: "https://drive.google.com/drive/folders/1rUekxKPMngGUCxjkhMBI36PqZZG3EqxI?usp=drive_link",
                },
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/drive/folders/1_v6zO6BkQ8EXUECYnwjHuoBrLWZ44JG-?usp=drive_link",
                },
              ],
            },
            {
              SasaranKinerjaPegawai: [
                {
                  Tahun: "2025",
                  Link: "https://drive.google.com/drive/folders/1CtHXtBsQ4RYSmy7xoRffKxjiWbdpbeeq?usp=drive_link",
                },
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/drive/folders/1I_2GpksFhz7QIcOmhkfKV2WqBuaY5W5Z?usp=drive_link",
                },
              ],
            },
          ],
        },
        {
          PelaporanKinerja: [
            {
              LaporanKinerja: [
                {
                  Tahun: "2024",
                  Link: "https://ppid.bps.go.id/upload/doc/Revisi_2_LAKIN_2024_1740131600.pdf",
                },
                {
                  Tahun: "2023",
                  Link: "https://ppid.bps.go.id/upload/doc/LAKIN_BPS_Kota_Surabaya_2023_Rev_1714985464.pdf",
                },
                {
                  Tahun: "2022",
                  Link: "https://ppid.bps.go.id/upload/doc/Laporan_Kinerja_BPS_Kota_Surabaya_Tahun_2022_1675144093.pdf",
                },
                {
                  Tahun: "2021",
                  Link: "https://ppid.bps.go.id/upload/doc/Laporan_Kinerja_BPS_Kota_Surabaya_2021_1675151111.pdf",
                },
                {
                  Tahun: "2020",
                  Link: "https://ppid.bps.go.id/upload/doc/LAKIN_BPS_Kota_Surabaya_2020_1717577170.pdf",
                },
              ],
            },
            {
              MekanismeRewardAndPunishment: [
                {
                  Tahun: "2025",
                  Link: "https://drive.google.com/drive/folders/1NptcBcgeH49EAoWnmOeNYaWk_z5_QMx3?usp=drive_link",
                },
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/drive/folders/1WogSx_rfvsuBpm4YREgxRqNytDtw9W5V?usp=drive_link",
                },
              ],
            },
            {
              Penghargaan: [
                {
                  Tahun: "2025",
                  Link: "https://drive.google.com/drive/folders/1JyzVQm_9H140Voq2gC_K8NNUWrhfzWbl?usp=drive_link",
                },
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/drive/folders/1ly3rG_IWYPS4ZXXcj1cDl-5y0yguMAbF?usp=drive_link",
                },
              ],
            },
            {
              LaporanHasilEvaluasiAKIP: [
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/file/d/1XWyr1dCMx0R1aL80Dd6Xe_gOI0MTdQeg/view?usp=drive_link",
                },
                {
                  Tahun: "2023",
                  Link: "https://drive.google.com/file/d/1zpVugqy-Z1buloBw5LHrwgsOHd-I7Tj8/view?usp=drive_link",
                },
              ],
            },
            {
              TindakLanjutLheAkip: [
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/drive/folders/1uk3wzzLSSif1S-DOESL694GAPm4Cqjdf?usp=drive_link",
                },
                {
                  Tahun: "2023",
                  Link: "https://drive.google.com/drive/folders/1etuoKbwd1vucvbwdHilteiWKEXgRmWGE?usp=drive_link",
                },
              ],
            },
            {
              PermindokAKIP: [
                {
                  Tahun: "2025",
                  Link: "https://drive.google.com/drive/folders/1b-w2V276PpgfR-Gw5rempf3Ydk18z1aG?usp=drive_link",
                },
                {
                  Tahun: "2024",
                  Link: "https://drive.google.com/drive/folders/13lMQz7ioAuFV6gMP_MyG3uj_9CY8ohQV?usp=drive_link",
                },
              ],
            },
          ],
        },
      ];

      const sidebarMapping = {
        PerencanaanKinerja: "subPerencanaanKinerja",
        PengukuranKinerja: "subPengukuranKinerja",
        PelaporanKinerja: "subPelaporanKinerja",
        EvaluasiKinerja: "subEvaluasiKinerja",
      };

      // Fungsi untuk mengubah nama dari CamelCase ke format yang lebih readable
      function formatName(name) {
        const mapping = {
          IndikatorKinerjaUtama: "Indikator Kinerja Utama",
          RencanaStrategis: "Rencana Strategis",
          PerjanjianKinerja: "Perjanjian Kinerja",
          RapatMonitoringCapaianKinerjaTriwulanan:
            "Rapat Monitoring Capaian Kinerja Triwulanan",
          BuktiDukungCapaianKinerja: "Bukti Dukung Capaian Kinerja",
          BuktiDukungSolusi: "Bukti Dukung Solusi",
          BuktiDukungTindakLanjut: "Bukti Dukung Tindak Lanjut",
          SKTimSAKIP: "SK Tim SAKIP",
          CascadingKinerjaPegawai: "Cascading Kinerja Pegawai",
          SasaranKinerjaPegawai: "Sasaran Kinerja Pegawai",
          LaporanKinerja: "Laporan Kinerja",
          MekanismeRewardAndPunishment: "Mekanisme Reward & Punishment",
          Penghargaan: "Penghargaan",
          LaporanHasilEvaluasiAKIP: "Laporan Hasil Evaluasi AKIP",
          TindakLanjutLheAkip: "Tindak Lanjut LHE AKIP",
          PermindokAKIP: "Permindok AKIP",
        };
        return mapping[name] || name;
      }

      // Fungsi untuk mengecek apakah link adalah PDF
      function isPdfLink(link) {
        return link.includes(".pdf") || link.includes("ppid.bps.go.id");
      }

      // Fungsi untuk update sidebar berdasarkan tahun
      function updateSidebar(selectedYear) {
        // Reset semua container
        Object.values(sidebarMapping).forEach((containerId) => {
          document.getElementById(containerId).innerHTML = "";
        });

        if (!selectedYear) return;

        // Loop through data dan populate sidebar
        dataSubSidebar.forEach((category) => {
          Object.keys(category).forEach((categoryName) => {
            const containerId = sidebarMapping[categoryName];
            if (!containerId) return;

            const container = document.getElementById(containerId);
            const items = category[categoryName];

            items.forEach((item) => {
              Object.keys(item).forEach((itemName) => {
                const yearData = item[itemName];
                const matchingYear = yearData.find(
                  (data) => data.Tahun === selectedYear
                );

                if (matchingYear) {
                  const link = document.createElement("a");
                  link.className = "collapse-item";
                  link.style.whiteSpace = "normal";
                  link.style.wordBreak = "break-word";

                  const itemDisplayName = formatName(itemName);

                  if (matchingYear.Link === "Belum Tersedia") {
                    link.innerHTML = `<i class="fas fa-clock text-warning"></i> ${itemDisplayName} <span class="no-data">(Belum Tersedia)</span>`;
                    link.href = "#";
                    link.style.cursor = "default";
                  } else if (isPdfLink(matchingYear.Link)) {
                    link.innerHTML = `<i class="fas fa-file-pdf text-danger"></i> ${itemDisplayName}`;
                    link.href = matchingYear.Link;
                    link.target = "_blank";
                  } else {
                    link.innerHTML = `<i class="fab fa-google-drive text-success"></i> ${itemDisplayName}`;
                    link.href = matchingYear.Link;
                    link.target = "_blank";
                  }

                  container.appendChild(link);
                }
              });
            });
          });
        });

        // Jika tidak ada data untuk tahun tersebut, tampilkan pesan
        Object.values(sidebarMapping).forEach((containerId) => {
          const container = document.getElementById(containerId);
          if (container.children.length === 0) {
            const noData = document.createElement("div");
            noData.className = "collapse-item no-data w-50";
            noData.innerHTML =
              '<i class="fas fa-info-circle"></i> Tidak ada data';
            container.appendChild(noData);
          }
        });
      }

      // Event listener untuk perubahan tahun
      document.getElementById("tahun").addEventListener("change", function () {
        updateSidebar(this.value);
      });

      // Inisialisasi sidebar kosong
      updateSidebar("");

      // Sidebar toggle functionality
      $("#sidebarToggle").on("click", function (e) {
        $("body").toggleClass("sidebar-toggled");
        $(".sidebar").toggleClass("toggled");
      });
    </script>
    <script>
      // Fungsi bantu ubah nilai dari string koma ke float
      function parseNilai(nilai) {
        return parseFloat(nilai.replace(",", "."));
      }

      // Filter dan sort data
      const berAKHLAKData = data.filter(
        (item) => item.indikator === "Indeks BerAKHLAK"
      );
      const sakipData = data
        .filter((item) => item.indikator === "Nilai Sakip")
        .sort((a, b) => parseInt(a.Tahun) - parseInt(b.Tahun));
      const zonaIntegritasData = data
        .filter(
          (item) => item.indikator === "Nilai Desk Evaluation Zona Integritas"
        )
        .sort((a, b) => parseInt(a.Tahun) - parseInt(b.Tahun));

      // Set default global
      Chart.defaults.font.family = "Segoe UI";
      Chart.defaults.responsive = true;
      Chart.defaults.maintainAspectRatio = false;

      // Plugin untuk menaruh nilai di tengah Doughnut
      const centerTextPlugin = {
        id: "centerText",
        beforeDraw: function (chart) {
          if (!berAKHLAKData.length) return;

          const ctx = chart.ctx;
          const width = chart.width;
          const height = chart.height;

          ctx.restore();
          const fontSize = (height / 114).toFixed(2);
          ctx.font = fontSize + "em sans-serif";
          ctx.textBaseline = "middle";
          ctx.fillStyle = "#4F46E5";

          const text = berAKHLAKData[0].Nilai;
          const textX = Math.round((width - ctx.measureText(text).width) / 2);
          const textY = height / 2;

          ctx.fillText(text, textX, textY);
          ctx.save();
        },
      };

      // 1. Doughnut Indeks BerAKHLAK
      if (berAKHLAKData.length) {
        const ctxBerAKHLAK = document
          .getElementById("chartBerAKHLAK")
          .getContext("2d");
        new Chart(ctxBerAKHLAK, {
          type: "doughnut",
          data: {
            labels: ["Nilai BerAKHLAK", "Target Sisa"],
            datasets: [
              {
                data: [
                  parseNilai(berAKHLAKData[0].Nilai),
                  100 - parseNilai(berAKHLAKData[0].Nilai),
                ],
                backgroundColor: ["#4F46E5", "#E5E7EB"],
                borderWidth: 0,
                cutout: "70%",
              },
            ],
          },
          options: {
            plugins: {
              legend: {
                position: "bottom",
                labels: {
                  padding: 20,
                  usePointStyle: true,
                },
              },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    return context.dataIndex === 0
                      ? "Nilai: " + context.parsed.toFixed(2)
                      : "Sisa target: " + context.parsed.toFixed(2);
                  },
                },
              },
            },
            elements: {
              arc: {
                borderRadius: 5,
              },
            },
          },
          plugins: [centerTextPlugin],
        });
      }

      // 2. Line Chart Nilai Sakip
      const ctxSakip = document.getElementById("chartSakip").getContext("2d");
      new Chart(ctxSakip, {
        type: "line",
        data: {
          labels: sakipData.map((item) => item.Tahun),
          datasets: [
            {
              label: "Nilai Sakip",
              data: sakipData.map((item) => parseNilai(item.Nilai)),
              borderColor: "#10B981",
              backgroundColor: "rgba(16, 185, 129, 0.1)",
              borderWidth: 3,
              fill: true,
              tension: 0.4,
              pointBackgroundColor: "#10B981",
              pointBorderColor: "#fff",
              pointBorderWidth: 2,
              pointRadius: 6,
              pointHoverRadius: 8,
            },
          ],
        },
        options: {
          plugins: {
            legend: { display: false },
            tooltip: {
              backgroundColor: "rgba(0,0,0,0.8)",
              titleColor: "#fff",
              bodyColor: "#fff",
              borderColor: "#10B981",
              borderWidth: 1,
            },
          },
          scales: {
            y: {
              beginAtZero: false,
              min: 40,
              max: 80,
              grid: {
                color: "rgba(0,0,0,0.1)",
              },
              ticks: {
                callback: function (value) {
                  return value.toFixed(1);
                },
              },
            },
            x: {
              grid: {
                color: "rgba(0,0,0,0.1)",
              },
            },
          },
        },
      });

      // 3. Bar Chart Zona Integritas
      const ctxZonaIntegritas = document
        .getElementById("chartZonaIntegritas")
        .getContext("2d");
      new Chart(ctxZonaIntegritas, {
        type: "bar",
        data: {
          labels: zonaIntegritasData.map((item) => item.Tahun),
          datasets: [
            {
              label: "Nilai Zona Integritas",
              data: zonaIntegritasData.map((item) => parseNilai(item.Nilai)),
              backgroundColor: ["#F59E0B", "#EAB308"],
              borderColor: ["#D97706", "#CA8A04"],
              borderWidth: 2,
              borderRadius: 8,
              borderSkipped: false,
            },
          ],
        },
        options: {
          plugins: {
            legend: { display: false },
            tooltip: {
              backgroundColor: "rgba(0,0,0,0.8)",
              titleColor: "#fff",
              bodyColor: "#fff",
              borderColor: "#F59E0B",
              borderWidth: 1,
            },
          },
          scales: {
            y: {
              beginAtZero: false,
              min: 80,
              max: 100,
              grid: {
                color: "rgba(0,0,0,0.1)",
              },
              ticks: {
                callback: function (value) {
                  return value.toFixed(1);
                },
              },
            },
            x: {
              grid: {
                color: "rgba(0,0,0,0.1)",
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
